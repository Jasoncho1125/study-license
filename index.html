<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>자격증공부</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div id="app">
        <header class="app-header">
            <h1>소방안전관리자2급</h1>
            <div class="header-icons">
                <div id="user-status" style="display: none; align-items: center;">
                    <span id="user-display-name" class="user-name"></span>
                    <button id="logout-button" class="icon-button" title="로그아웃">📤</button>
                </div>
                <button id="login-icon" class="icon-button">👤</button>
                <button id="settings-button" class="icon-button" title="설정">⚙️</button>
            </div>
        </header>

         <!-- 설정 Modal -->
        <div id="settings-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <span id="close-modal-button" class="close-button">&times;</span>
                <h2>⚙️ 설정</h2>
                <div id="book-selector-container">
                    <label for="book-select">Book 선택:</label>
                    <select id="book-select"></select>
                </div>
                <div id="chapter-selector-container" class="mb-3">
                    <label for="chapter-select">Chapter 선택:</label>
                    <br><select id="chapter-select" style="width: 100%; margin-top: 5px;"></select>
                </div>

                <hr>
                <p id="total-problems-info"></p>
                <p id="local-storage-status" class="storage-info"></p>
                <div class="reset-options">
                    <button id="reset-current-book-button">현재 Chapter 초기화</button>
                    <button id="reset-all-button" class="danger">현재 Book 초기화</button>
                </div>
                <div class="reset-options" style="margin-top: 5px;">
                    <label for="include-memorized-reset" style="font-size: 0.9em; cursor: pointer;"><input type="checkbox" id="include-memorized-reset"> 암기 완료 포함</label>
                </div>
                <p id="load-status"></p>
                <hr style="margin-top: 20px;">
                <button id="settings-close-button-bottom" style="width: 100%; background-color: #6c757d;">닫기</button>
            </div>
        </div>

        <section id="quiz-section" style="display: none;">
            <div class="quiz-header-container">
                <button id="prev-chapter-button" class="nav-button">⬅️</button>
                <h2 id="quiz-header"></h2>
                <button id="next-chapter-button" class="nav-button">➡️</button>
            </div>
            <div id="problem-navigation">
                <span id="current-problem-info"></span>
                <button id="next-problem-top-button" class="nav-button-small" style="display: none;">다음 문제 ➡️</button>
            </div>

            <div id="image-container">
                <img id="image_a" src="" alt="문제 이미지" draggable="false" style="max-width: 100%; height: auto;"> 
                <div id="swipe-overlay"></div>
            </div>

            <div id="options-container" style="display: flex; justify-content: space-around;">
                <button class="option-button" data-option="1">1번</button>
                <button class="option-button" data-option="2">2번</button>
                <button class="option-button" data-option="3">3번</button>
                <button class="option-button" data-option="4">4번</button>
            </div>

            <div id="result-container" style="display:none;">
                <p id="result-message"></p>
                <p id="explanation-text"></p>
                <img id="image_b" src="" alt="해설 이미지" style="display:none; max-width: 100%; height: auto;">
            </div>
            
            <div class="action-buttons">
                <button id="memorize-button" style="display:none;">암기 완료 🧠</button>
                <button id="next-button" style="display:none;">다음 문제 ➡️</button>
            </div>
        </section>

        <section id="progress-summary-section">
            <div id="chart-container" style="margin-bottom: 20px;">
                <h3>최근 7일 풀이 현황</h3>
                <canvas id="solved-problems-chart"></canvas>
            </div>
            <h2>'Book' 학습 현황</h2>
            <div id="progress-summary-container">
                <!-- 학습 현황이 여기에 동적으로 추가됩니다. -->
            </div>
        </section>

    </div>

    <script  type="module" src="script.js"></script>
    <script type="module" src="auth-check.js"></script>
</body>
</html>